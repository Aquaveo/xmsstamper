<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>xmsstamper: Stamper_Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xmsstamper
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__stamper__tutorial.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Stamper_Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Stamper_Tutorial">Stamper Tutorial</a><ul><li class="level2"><a href="#Intro_Stamper">Introduction</a></li>
<li class="level2"><a href="#Example_FillEmbankment">Example - Fill Embankment Feature Stamp</a></li>
<li class="level2"><a href="#Example_CutEmbankment">Example - Cut Embankment Feature Stamp</a></li>
<li class="level2"><a href="#Example_WingWall">Example - Wing Wall with Fill Embankment Feature Stamp</a></li>
<li class="level2"><a href="#Example_SlopedAbutment">Example - Sloped Abutment with Fill Embankment Feature Stamp</a></li>
<li class="level2"><a href="#Example_Guidebank">Example - Guidebank with Fill Embankment Feature Stamp</a></li>
<li class="level2"><a href="#Example_Bathymetry">Example - Fill Embankment Feature Stamp Intersecting Bathymetry</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="Stamper_Tutorial"></a>
Stamper Tutorial</h1>
<h2><a class="anchor" id="Intro_Stamper"></a>
Introduction</h2>
<p>The purpose of this tutorial is to provide explanation on how to use the classes defined in xmsng to perform feature stamping. The examples provided in this tutorial refer to test cases that are in the xmsng/tutorial/TutStamping.cpp source file.</p>
<p>The xmsng library contains classes for performing feature stamping. The basic idea is to associate cross sections with a center line to produce a new feature (a "fill" embankment, a "cut" channel). The output from the feature stamp is a TIN and a set of break lines defining distinct characteristics of the new feature, such as the center line, shoulder, toe, and end cap.</p>
<p>The xms::StStamperIo class is used to set up the inputs to the stamp operation and it also contains the outputs of the operation in the member variables m_outTin and m_outBreakLines;</p>
<h2><a class="anchor" id="Example_FillEmbankment"></a>
Example - Fill Embankment Feature Stamp</h2>
<p>The following example shows how to use the stamper to make a simple fill embankment. The testing code for this example is TutStampingTests::test_StampFillEmbankment.</p>
<div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="class_tut_stamping_unit_tests.html#a3f879c3cd67a85c4a38a3ee069ab9670">TutStampingUnitTests::test_StampFillEmbankment</a>()</div><div class="line">{</div><div class="line">  <span class="comment">// declare a XmStamperIo class to create the inputs</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamper_io.html">xms::XmStamperIo</a> io;</div><div class="line"></div><div class="line">  <span class="comment">// set as a &quot;fill&quot; stamp</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aaf8fcd384e63313a853ae09f8aa44fef">m_stampingType</a> = 1;</div><div class="line"></div><div class="line">  <span class="comment">// define the center line</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a12ca12a289b9efb55c46d7c0733b98a6">m_centerLine</a> = {{0, 0, 15}, {0, 10, 15}};</div><div class="line"></div><div class="line">  <span class="comment">// define a cross section at each point on the center line. This will</span></div><div class="line">  <span class="comment">// be a symmetric cross section. The top width will be 10 and the side</span></div><div class="line">  <span class="comment">// slope will be 1. The cross section will have a total width of 40.</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_cross_section.html">xms::XmStampCrossSection</a> cs;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a> = {{0, 15}, {5, 15}, {6, 14}};</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a> = 20;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a> = 1;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#ae703f150a6589ef5aed99a75904a7317">m_right</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a73cdbaf385241ae7361bbd82ac31ef40">m_rightMax</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a08dd2ea36dd84a7063a7070423285605">m_idxRightShoulder</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a>;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line"></div><div class="line">  <span class="comment">// create a Raster to stamp to</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> numPixelsX = 41, numPixelsY = 11;</div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> pixelSize = 1.0;</div><div class="line">  <span class="keyword">const</span> xms::Pt3d minPt(-20.0, 0.0);</div><div class="line">  <span class="keyword">const</span> std::vector&lt;double&gt; rasterVals(numPixelsX * numPixelsY, 5);</div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_raster.html">xms::XmStampRaster</a> raster(numPixelsX, numPixelsY, pixelSize, pixelSize, minPt, rasterVals, XM_NODATA);</div><div class="line">  <span class="comment">// set the raster member of the raster class.  The values are interpolated from io.m_outTin in</span></div><div class="line">  <span class="comment">// the XmStamper::DoStamp function.</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a> = raster;</div><div class="line"></div><div class="line">  <span class="comment">// create a XmStamper class. This class performs the stamp operation.</span></div><div class="line">  BSHP&lt;xms::XmStamper&gt; st = <a class="code" href="classxms_1_1_xm_stamper.html#aad53ceb8805886749c4d5efc7928aee9">xms::XmStamper::New</a>();</div><div class="line">  st-&gt;DoStamp(io);</div><div class="line"></div><div class="line">  std::string rasterFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testFillEmbankment_out.asc&quot;</span>));</div><div class="line">  std::string baseFile(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testFillEmbankment_base.asc&quot;</span>));</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a>.<a class="code" href="classxms_1_1_xm_stamp_raster.html#a32f68c68796b0c07c1fb877abb550ea6">WriteGridFile</a>(rasterFileName, xms::XmStampRaster::XmRasterFormatEnum::RS_ARCINFO_ASCII);</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a910e81903f66d29dc334d1ed7c57ca5d">TS_ASSERT_TXT_FILES_EQUAL</a>(baseFile, rasterFileName);</div><div class="line"></div><div class="line">  <span class="comment">// verify the outputs</span></div><div class="line">  TS_ASSERT(io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>); <span class="comment">// the output TIN should exist</span></div><div class="line">  xms::VecPt3d basePts = {{0, 0, 15},   {0, 10, 15}, {-5, 0, 15}, {-20, 0, 0}, {-5, 10, 15},</div><div class="line">                          {-20, 10, 0}, {5, 0, 15},  {20, 0, 0},  {5, 10, 15}, {20, 10, 0}};</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#ad074895a54cf874aed416e323758f355">TS_ASSERT_DELTA_VECPT3D</a>(basePts, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;Points(), 1e-9);</div><div class="line"></div><div class="line">  TS_ASSERT_EQUALS(7, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>.size());</div><div class="line">  xms::VecInt baseLines = {0, 1}; <span class="comment">// centerline</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[0]);</div><div class="line">  baseLines = {3, 2, 0, 6, 7}; <span class="comment">// first cross section</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[1]);</div><div class="line">  baseLines = {5, 4, 1, 8, 9}; <span class="comment">// second cross section</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[2]);</div><div class="line">  baseLines = {3, 5}; <span class="comment">// left toe</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[3]);</div><div class="line">  baseLines = {7, 9}; <span class="comment">// right toe</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[4]);</div><div class="line">  baseLines = {2, 4}; <span class="comment">// left shoulder</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[5]);</div><div class="line">  baseLines = {6, 8}; <span class="comment">// right shoulder</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[6]);</div><div class="line">  <span class="comment">// Write output TIN for viewing in XMS</span></div><div class="line">  std::string tinFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testFillEmbankmentTin_out.tin&quot;</span>));</div><div class="line">  std::ofstream ofs(tinFileName, std::ofstream::trunc);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;ExportTinFile(ofs);</div><div class="line">} <span class="comment">// TutStampingUnitTests::test_StampFillEmbankment</span></div></div><!-- fragment --><p> The output from this test looks like the following image.</p>
<div class="image">
<img src="doxygen/html/images/tutStamp_FillEmbankment.png" alt="Stamp fill embankment"/>
</div>
<h2><a class="anchor" id="Example_CutEmbankment"></a>
Example - Cut Embankment Feature Stamp</h2>
<p>The following example shows how to use the stamper to make a simple cut embankment. This is just like the fill embankment but we have flipped the specified cross sections. The testing code for this example is TutStampingTests::test_StampCutEmbankment.</p>
<div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="class_tut_stamping_unit_tests.html#a74261416be0ec12e2a8852b99f030fdb">TutStampingUnitTests::test_StampCutEmbankment</a>()</div><div class="line">{</div><div class="line">  <span class="comment">// declare a XmStamperIo class to create the inputs</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamper_io.html">xms::XmStamperIo</a> io;</div><div class="line"></div><div class="line">  <span class="comment">// set as a &quot;cut&quot; stamp</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aaf8fcd384e63313a853ae09f8aa44fef">m_stampingType</a> = 0;</div><div class="line"></div><div class="line">  <span class="comment">// define the center line</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a12ca12a289b9efb55c46d7c0733b98a6">m_centerLine</a> = {{0, 0, 0}, {0, 10, 0}};</div><div class="line"></div><div class="line">  <span class="comment">// define a cross section at each point on the center line. This will</span></div><div class="line">  <span class="comment">// be a symmetric cross section. The top width will be 10 and the side</span></div><div class="line">  <span class="comment">// slope will be 1. The cross section will have a total width of 40.</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_cross_section.html">xms::XmStampCrossSection</a> cs;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a> = {{0, 0}, {5, 0}, {6, 1}};</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a> = 20;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a> = 1;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#ae703f150a6589ef5aed99a75904a7317">m_right</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a73cdbaf385241ae7361bbd82ac31ef40">m_rightMax</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a08dd2ea36dd84a7063a7070423285605">m_idxRightShoulder</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a>;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line"></div><div class="line">  <span class="comment">// create a Raster to stamp to</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> numPixelsX = 41, numPixelsY = 11;</div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> pixelSize = 1.0;</div><div class="line">  <span class="keyword">const</span> xms::Pt3d minPt(-20.0, 0.0);</div><div class="line">  <span class="keyword">const</span> std::vector&lt;double&gt; rasterVals(numPixelsX * numPixelsY, 5);</div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_raster.html">xms::XmStampRaster</a> raster(numPixelsX, numPixelsY, pixelSize, pixelSize, minPt, rasterVals, XM_NODATA);</div><div class="line">  <span class="comment">// set the raster member of the raster class.  The values are interpolated from io.m_outTin in</span></div><div class="line">  <span class="comment">// the XmStamper::DoStamp function.</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a> = raster;</div><div class="line"></div><div class="line">  <span class="comment">// create a XmStamper class. This class performs the stamp operation.</span></div><div class="line">  BSHP&lt;xms::XmStamper&gt; st = <a class="code" href="classxms_1_1_xm_stamper.html#aad53ceb8805886749c4d5efc7928aee9">xms::XmStamper::New</a>();</div><div class="line">  st-&gt;DoStamp(io);</div><div class="line"></div><div class="line">  std::string rasterFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testCutEmbankment_out.asc&quot;</span>));</div><div class="line">  std::string baseFile(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testCutEmbankment_base.asc&quot;</span>));</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a>.<a class="code" href="classxms_1_1_xm_stamp_raster.html#a32f68c68796b0c07c1fb877abb550ea6">WriteGridFile</a>(rasterFileName, xms::XmStampRaster::XmRasterFormatEnum::RS_ARCINFO_ASCII);</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a910e81903f66d29dc334d1ed7c57ca5d">TS_ASSERT_TXT_FILES_EQUAL</a>(baseFile, rasterFileName);</div><div class="line"></div><div class="line">  <span class="comment">// verify the outputs</span></div><div class="line">  TS_ASSERT(io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>); <span class="comment">// the output TIN should exist</span></div><div class="line">  xms::VecPt3d basePts = {{0, 0, 0},     {0, 10, 0}, {-5, 0, 0},  {-20, 0, 15}, {-5, 10, 0},</div><div class="line">                          {-20, 10, 15}, {5, 0, 0},  {20, 0, 15}, {5, 10, 0},   {20, 10, 15}};</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#ad074895a54cf874aed416e323758f355">TS_ASSERT_DELTA_VECPT3D</a>(basePts, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;Points(), 1e-9);</div><div class="line"></div><div class="line">  TS_ASSERT_EQUALS(7, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>.size());</div><div class="line">  xms::VecInt baseLines = {0, 1}; <span class="comment">// centerline</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[0]);</div><div class="line">  baseLines = {3, 2, 0, 6, 7}; <span class="comment">// first cross section</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[1]);</div><div class="line">  baseLines = {5, 4, 1, 8, 9}; <span class="comment">// second cross section</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[2]);</div><div class="line">  baseLines = {3, 5}; <span class="comment">// left toe</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[3]);</div><div class="line">  baseLines = {7, 9}; <span class="comment">// right toe</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[4]);</div><div class="line">  baseLines = {2, 4}; <span class="comment">// left shoulder</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[5]);</div><div class="line">  baseLines = {6, 8}; <span class="comment">// right shoulder</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[6]);</div><div class="line">  <span class="comment">// Write output TIN for viewing in XMS</span></div><div class="line">  std::string tinFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testCutEmbankmentTin_out.tin&quot;</span>));</div><div class="line">  std::ofstream ofs(tinFileName, std::ofstream::trunc);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;ExportTinFile(ofs);</div><div class="line">} <span class="comment">// TutStampingUnitTests::test_StampCutEmbankment</span></div></div><!-- fragment --><p> The output from this test looks like the following image.</p>
<div class="image">
<img src="doxygen/html/images/tutStamp_CutEmbankment.png" alt="Stamp cut embankment"/>
</div>
<h2><a class="anchor" id="Example_WingWall"></a>
Example - Wing Wall with Fill Embankment Feature Stamp</h2>
<p>The following example shows how to use the stamper to make a fill embankment with a wing wall end cap with a specified angle. An angle can be specified with all end caps and it will affect the orientation of the end cap from the center line to the shoulder. The wing wall has an additional angle that can be specified that changes the orientation from the shoulder to the toe. The testing code for this example is TutStampingTests::test_StampWingWall.</p>
<div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="class_tut_stamping_unit_tests.html#a20e23d7ac461dced04d97d95f104b559">TutStampingUnitTests::test_StampWingWall</a>()</div><div class="line">{</div><div class="line">  <span class="comment">// declare a XmStamperIo class to create the inputs</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamper_io.html">xms::XmStamperIo</a> io;</div><div class="line"></div><div class="line">  <span class="comment">// set as a &quot;fill&quot; stamp</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aaf8fcd384e63313a853ae09f8aa44fef">m_stampingType</a> = 1;</div><div class="line"></div><div class="line">  <span class="comment">// define the center line</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a12ca12a289b9efb55c46d7c0733b98a6">m_centerLine</a> = {{0, 0, 15}, {20, 20, 15}};</div><div class="line"></div><div class="line">  <span class="comment">// define a cross section at each point on the center line. This will</span></div><div class="line">  <span class="comment">// be a symmetric cross section. The top width will be 10 and the side</span></div><div class="line">  <span class="comment">// slope will be 1. The cross section will have a total width of 40.</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_cross_section.html">xms::XmStampCrossSection</a> cs;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a> = {{0, 15}, {5, 15}, {6, 14}};</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a> = 20;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a> = 1;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#ae703f150a6589ef5aed99a75904a7317">m_right</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a73cdbaf385241ae7361bbd82ac31ef40">m_rightMax</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a08dd2ea36dd84a7063a7070423285605">m_idxRightShoulder</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a>;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line"></div><div class="line">  <span class="comment">// wing wall is the default end cap</span></div><div class="line"></div><div class="line">  <span class="comment">// set the angles on the wing wall</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#ac21fb7d93e54671dc8bd890298a0fb7b">m_angle</a> = 15;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#aed357020a25fce416261e7d9baee8ded">m_wingWall</a>.<a class="code" href="classxms_1_1_xm_wing_wall.html#a53975443a9b1441b5158c407615b5ae3">m_wingWallAngle</a> = 15;</div><div class="line"></div><div class="line">  <span class="comment">// set the angles on the wing wall</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a52d876c31dafab2cb6e7112ab94e4574">m_lastEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#ac21fb7d93e54671dc8bd890298a0fb7b">m_angle</a> = -15;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a52d876c31dafab2cb6e7112ab94e4574">m_lastEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#aed357020a25fce416261e7d9baee8ded">m_wingWall</a>.<a class="code" href="classxms_1_1_xm_wing_wall.html#a53975443a9b1441b5158c407615b5ae3">m_wingWallAngle</a> = 10;</div><div class="line"></div><div class="line">  <span class="comment">// create a Raster to stamp to</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> numPixelsX = 46, numPixelsY = 45;</div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> pixelSize = 1.0;</div><div class="line">  <span class="keyword">const</span> xms::Pt3d minPt(-16.0, -8.0);</div><div class="line">  <span class="keyword">const</span> std::vector&lt;double&gt; rasterVals(numPixelsX * numPixelsY, XM_NODATA);</div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_raster.html">xms::XmStampRaster</a> raster(numPixelsX, numPixelsY, pixelSize, pixelSize, minPt, rasterVals, XM_NODATA);</div><div class="line">  <span class="comment">// set the raster member of the raster class.  The values are interpolated from io.m_outTin in</span></div><div class="line">  <span class="comment">// the XmStamper::DoStamp function.</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a> = raster;</div><div class="line"></div><div class="line">  <span class="comment">// create a XmStamper class. This class performs the stamp operation.</span></div><div class="line">  BSHP&lt;xms::XmStamper&gt; st = <a class="code" href="classxms_1_1_xm_stamper.html#aad53ceb8805886749c4d5efc7928aee9">xms::XmStamper::New</a>();</div><div class="line">  st-&gt;DoStamp(io);</div><div class="line"></div><div class="line">  std::string rasterFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testWingWall_out.asc&quot;</span>));</div><div class="line">  std::string baseFile(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testWingWall_base.asc&quot;</span>));</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a>.<a class="code" href="classxms_1_1_xm_stamp_raster.html#a32f68c68796b0c07c1fb877abb550ea6">WriteGridFile</a>(rasterFileName, xms::XmStampRaster::XmRasterFormatEnum::RS_ARCINFO_ASCII);</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a910e81903f66d29dc334d1ed7c57ca5d">TS_ASSERT_TXT_FILES_EQUAL</a>(baseFile, rasterFileName);</div><div class="line"></div><div class="line">  <span class="comment">// verify the outputs</span></div><div class="line">  TS_ASSERT(io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>); <span class="comment">// the output TIN should exist</span></div><div class="line">  xms::VecPt3d basePts = {{0, 0, 15},       {20, 20, 15}, {-4.5, 2.6, 15}, {-15.1, 13.2, 0},</div><div class="line">                          {17.4, 24.5, 15}, {7.7, 36, 0}, {4.5, -2.6, 15}, {21.2, -7.1, 0},</div><div class="line">                          {22.6, 15.5, 15}, {28.2, 0, 0}};</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#ad074895a54cf874aed416e323758f355">TS_ASSERT_DELTA_VECPT3D</a>(basePts, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;Points(), 1e-1);</div><div class="line"></div><div class="line">  TS_ASSERT_EQUALS(7, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>.size());</div><div class="line">  xms::VecInt baseLines = {0, 1}; <span class="comment">// centerline</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[0]);</div><div class="line">  baseLines = {3, 2, 0, 6, 7}; <span class="comment">// first cross section</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[1]);</div><div class="line">  baseLines = {5, 4, 1, 8, 9}; <span class="comment">// second cross section</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[2]);</div><div class="line">  baseLines = {3, 5}; <span class="comment">// left toe</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[3]);</div><div class="line">  baseLines = {7, 9}; <span class="comment">// right toe</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[4]);</div><div class="line">  baseLines = {2, 4}; <span class="comment">// left shoulder</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[5]);</div><div class="line">  baseLines = {6, 8}; <span class="comment">// right shoulder</span></div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a320ba70a42230e622cff58c5b4922cac">TS_ASSERT_EQUALS_VEC</a>(baseLines, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a884f928d22503274a8080ad505b89e00">m_outBreakLines</a>[6]);</div><div class="line">  <span class="comment">// Write output TIN for viewing in XMS</span></div><div class="line">  std::string tinFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testWingWallTin_out.tin&quot;</span>));</div><div class="line">  std::ofstream ofs(tinFileName, std::ofstream::trunc);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;ExportTinFile(ofs);</div><div class="line">} <span class="comment">// TutStampingUnitTests::test_StampWingWall</span></div></div><!-- fragment --><p> The output from this test looks like the following image.</p>
<div class="image">
<img src="doxygen/html/images/tutStamp_WingWall.png" alt="Stamp fill embankment with a wing wall end cap"/>
</div>
<h2><a class="anchor" id="Example_SlopedAbutment"></a>
Example - Sloped Abutment with Fill Embankment Feature Stamp</h2>
<p>The following example shows how to use the stamper to make a fill embankment with a sloped abutment end cap. The testing code for this example is TutStampingTests::test_StampSlopedAbutment.</p>
<div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="class_tut_stamping_unit_tests.html#a31c03c1c9db6fc3e92fc443c1bb510b2">TutStampingUnitTests::test_StampSlopedAbutment</a>()</div><div class="line">{</div><div class="line">  <span class="comment">// declare a XmStamperIo class to create the inputs</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamper_io.html">xms::XmStamperIo</a> io;</div><div class="line"></div><div class="line">  <span class="comment">// set as a &quot;fill&quot; stamp</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aaf8fcd384e63313a853ae09f8aa44fef">m_stampingType</a> = 1;</div><div class="line"></div><div class="line">  <span class="comment">// define the center line</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a12ca12a289b9efb55c46d7c0733b98a6">m_centerLine</a> = {{0, 0, 15}, {20, 20, 15}};</div><div class="line"></div><div class="line">  <span class="comment">// define a cross section at each point on the center line. This will</span></div><div class="line">  <span class="comment">// be a symmetric cross section. The top width will be 10 and the side</span></div><div class="line">  <span class="comment">// slope will be 1. The cross section will have a total width of 40.</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_cross_section.html">xms::XmStampCrossSection</a> cs;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a> = {{0, 15}, {5, 15}, {6, 14}};</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a> = 20;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a> = 1;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#ae703f150a6589ef5aed99a75904a7317">m_right</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a73cdbaf385241ae7361bbd82ac31ef40">m_rightMax</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a08dd2ea36dd84a7063a7070423285605">m_idxRightShoulder</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a>;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line"></div><div class="line">  <span class="comment">// change to a sloped abutment end cap</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#aa5b34fda30756e3812b931e942e91e54">m_type</a> = 1;</div><div class="line"></div><div class="line">  <span class="comment">// set the slope and max length for the end cap</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#a74832637cf3d393a4e400f6be234537c">m_slopedAbutment</a>.<a class="code" href="classxms_1_1_xm_sloped_abutment.html#abca787e033f793856971f0bb9ea51ff3">m_slope</a> = {{0, 15}, {1, 14}};</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#a74832637cf3d393a4e400f6be234537c">m_slopedAbutment</a>.<a class="code" href="classxms_1_1_xm_sloped_abutment.html#aedf5c684beec3e911e9be98ef7b5c992">m_maxX</a> = 10;</div><div class="line"></div><div class="line">  <span class="comment">// make the last end cap the same as the first</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a52d876c31dafab2cb6e7112ab94e4574">m_lastEndCap</a> = io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>;</div><div class="line">  <span class="comment">// change the angle on the last end cap</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a52d876c31dafab2cb6e7112ab94e4574">m_lastEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#ac21fb7d93e54671dc8bd890298a0fb7b">m_angle</a> = 20;</div><div class="line"></div><div class="line">  <span class="comment">// create a Raster to stamp to</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> numPixelsX = 56, numPixelsY = 53;</div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> pixelSize = 1.0;</div><div class="line">  <span class="keyword">const</span> xms::Pt3d minPt(-17.0, -17.0);</div><div class="line">  <span class="keyword">const</span> std::vector&lt;double&gt; rasterVals(numPixelsX * numPixelsY, XM_NODATA);</div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_raster.html">xms::XmStampRaster</a> raster(numPixelsX, numPixelsY, pixelSize, pixelSize, minPt, rasterVals, XM_NODATA);</div><div class="line">  <span class="comment">// set the raster member of the raster class.  The values are interpolated from io.m_outTin in</span></div><div class="line">  <span class="comment">// the XmStamper::DoStamp function.</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a> = raster;</div><div class="line"></div><div class="line">  <span class="comment">// create a XmStamper class. This class performs the stamp operation.</span></div><div class="line">  BSHP&lt;xms::XmStamper&gt; st = <a class="code" href="classxms_1_1_xm_stamper.html#aad53ceb8805886749c4d5efc7928aee9">xms::XmStamper::New</a>();</div><div class="line">  st-&gt;DoStamp(io);</div><div class="line"></div><div class="line">  std::string rasterFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testSlopedAbutment_out.asc&quot;</span>));</div><div class="line">  std::string baseFile(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testSlopedAbutment_base.asc&quot;</span>));</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a>.<a class="code" href="classxms_1_1_xm_stamp_raster.html#a32f68c68796b0c07c1fb877abb550ea6">WriteGridFile</a>(rasterFileName, xms::XmStampRaster::XmRasterFormatEnum::RS_ARCINFO_ASCII);</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a910e81903f66d29dc334d1ed7c57ca5d">TS_ASSERT_TXT_FILES_EQUAL</a>(baseFile, rasterFileName);</div><div class="line"></div><div class="line">  <span class="comment">// verify the outputs</span></div><div class="line">  TS_ASSERT(io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>); <span class="comment">// the output TIN should exist</span></div><div class="line">  xms::VecPt3d basePts = {</div><div class="line">    {0, 0, 15},         {20, 20, 15},       {-3.5, 3.5, 15},   {-14.1, 14.1, 0},</div><div class="line">    {15.2, 22.2, 15},   {4.6, 32.9, 0},     {3.5, -3.5, 15},   {14.1, -14.1, 0},</div><div class="line">    {24.8, 17.8, 15},   {35.4, 7.1, 0},     {-10.6, -3.5, 5},  {-12.9, -1.9, 4.2},</div><div class="line">    {-14.8, 0.5, 3.3},  {-16, 3.5, 2.5},    {-16.4, 7, 1.7},   {-15.8, 10.6, 0.8},</div><div class="line">    {-3.5, -10.6, 5.0}, {-1.9, -12.9, 4.2}, {0.5, -14.8, 3.3}, {3.5, -16.0, 2.5},</div><div class="line">    {7.0, -16.4, 1.7},  {10.6, -15.8, 0.8}, {19.4, 31.3, 5},   {16.6, 33.4, 3.8},</div><div class="line">    {13, 34.6, 2.5},    {8.8, 34.4, 1.3},   {29, 26.8, 5},     {31.8, 25.9, 4.3},</div><div class="line">    {34.3, 24.1, 3.6},  {36.4, 21.5, 2.9},  {37.7, 18.2, 2.1}, {38, 14.6, 1.4},</div><div class="line">    {37.3, 10.8, 0.7}};</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#ad074895a54cf874aed416e323758f355">TS_ASSERT_DELTA_VECPT3D</a>(basePts, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;Points(), 1e-1);</div><div class="line">  <span class="comment">// Write output TIN for viewing in XMS</span></div><div class="line">  std::string tinFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testSlopedAbutmentTin_out.tin&quot;</span>));</div><div class="line">  std::ofstream ofs(tinFileName, std::ofstream::trunc);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;ExportTinFile(ofs);</div><div class="line">} <span class="comment">// TutStampingUnitTests::test_StampSlopedAbutment</span></div></div><!-- fragment --><p> The output from this test looks like the following image.</p>
<div class="image">
<img src="doxygen/html/images/tutStamp_SlopedAbutment.png" alt="Stamp fill embankment with a sloped abutment end cap"/>
</div>
<h2><a class="anchor" id="Example_Guidebank"></a>
Example - Guidebank with Fill Embankment Feature Stamp</h2>
<p>The following example shows how to use the stamper to make a fill embankment with a guidebank end cap. The testing code for this example is TutStampingTests::test_StampGuidebank.</p>
<div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="class_tut_stamping_unit_tests.html#abb090fb5531419463f4a63a464928d20">TutStampingUnitTests::test_StampGuidebank</a>()</div><div class="line">{</div><div class="line">  <span class="comment">// declare a XmStamperIo class to create the inputs</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamper_io.html">xms::XmStamperIo</a> io;</div><div class="line"></div><div class="line">  <span class="comment">// set as a &quot;fill&quot; stamp</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aaf8fcd384e63313a853ae09f8aa44fef">m_stampingType</a> = 1;</div><div class="line"></div><div class="line">  <span class="comment">// define the center line</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a12ca12a289b9efb55c46d7c0733b98a6">m_centerLine</a> = {{0, 0, 15}, {50, 50, 15}};</div><div class="line"></div><div class="line">  <span class="comment">// define a cross section at each point on the center line. This will</span></div><div class="line">  <span class="comment">// be a symmetric cross section. The top width will be 10 and the side</span></div><div class="line">  <span class="comment">// slope will be 1. The cross section will have a total width of 40.</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_cross_section.html">xms::XmStampCrossSection</a> cs;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a> = {{0, 15}, {5, 15}, {6, 14}};</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a> = 10;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a> = 1;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#ae703f150a6589ef5aed99a75904a7317">m_right</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a73cdbaf385241ae7361bbd82ac31ef40">m_rightMax</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a08dd2ea36dd84a7063a7070423285605">m_idxRightShoulder</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a>;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line"></div><div class="line">  <span class="comment">// change to a guidebank end cap</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#aa5b34fda30756e3812b931e942e91e54">m_type</a> = 0;</div><div class="line"></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#a49d79f52dbcad64ce99003b3ab888923">m_guidebank</a>.<a class="code" href="classxms_1_1_xm_guidebank.html#a67d866118eb7bbb018a1f443372f5bd6">m_nPts</a> = 10;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#a49d79f52dbcad64ce99003b3ab888923">m_guidebank</a>.<a class="code" href="classxms_1_1_xm_guidebank.html#a0e3026fe5e167ed67e5cdbc9b7e70494">m_radius1</a> = 30;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#a49d79f52dbcad64ce99003b3ab888923">m_guidebank</a>.<a class="code" href="classxms_1_1_xm_guidebank.html#a609a0de3c29fc54fe0b24caa5893735c">m_radius2</a> = 15;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#a49d79f52dbcad64ce99003b3ab888923">m_guidebank</a>.<a class="code" href="classxms_1_1_xm_guidebank.html#a076d87a686949d26f21a026c99113fa1">m_side</a> = 0; <span class="comment">// left side</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#a49d79f52dbcad64ce99003b3ab888923">m_guidebank</a>.<a class="code" href="classxms_1_1_xm_guidebank.html#a5b8408b873283870be018bdeb05b5ab5">m_width</a> = 6;</div><div class="line"></div><div class="line">  <span class="comment">// make the last end cap the same as the first</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a52d876c31dafab2cb6e7112ab94e4574">m_lastEndCap</a> = io.<a class="code" href="classxms_1_1_xm_stamper_io.html#ad718cd7a5c971590f053fd60e6ffca47">m_firstEndCap</a>;</div><div class="line">  <span class="comment">// change the angle on the last end cap</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a52d876c31dafab2cb6e7112ab94e4574">m_lastEndCap</a>.<a class="code" href="classxms_1_1_xm_stamper_end_cap.html#ac21fb7d93e54671dc8bd890298a0fb7b">m_angle</a> = 10;</div><div class="line"></div><div class="line">  <span class="comment">// create a Raster to stamp to</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> numPixelsX = 90, numPixelsY = 81;</div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> pixelSize = 1.0;</div><div class="line">  <span class="keyword">const</span> xms::Pt3d minPt(-21.0, -12.0);</div><div class="line">  <span class="keyword">const</span> std::vector&lt;double&gt; rasterVals(numPixelsX * numPixelsY, XM_NODATA);</div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_raster.html">xms::XmStampRaster</a> raster(numPixelsX, numPixelsY, pixelSize, pixelSize, minPt, rasterVals, XM_NODATA);</div><div class="line">  <span class="comment">// set the raster member of the raster class.  The values are interpolated from io.m_outTin in</span></div><div class="line">  <span class="comment">// the XmStamper::DoStamp function.</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a> = raster;</div><div class="line"></div><div class="line">  <span class="comment">// create a XmStamper class. This class performs the stamp operation.</span></div><div class="line">  BSHP&lt;xms::XmStamper&gt; st = <a class="code" href="classxms_1_1_xm_stamper.html#aad53ceb8805886749c4d5efc7928aee9">xms::XmStamper::New</a>();</div><div class="line">  st-&gt;DoStamp(io);</div><div class="line"></div><div class="line">  std::string rasterFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testGuidebank_out.asc&quot;</span>));</div><div class="line">  std::string baseFile(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testGuidebank_base.asc&quot;</span>));</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a>.<a class="code" href="classxms_1_1_xm_stamp_raster.html#a32f68c68796b0c07c1fb877abb550ea6">WriteGridFile</a>(rasterFileName, xms::XmStampRaster::XmRasterFormatEnum::RS_ARCINFO_ASCII);</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a910e81903f66d29dc334d1ed7c57ca5d">TS_ASSERT_TXT_FILES_EQUAL</a>(baseFile, rasterFileName);</div><div class="line"></div><div class="line">  <span class="comment">// verify the outputs</span></div><div class="line">  TS_ASSERT(io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>); <span class="comment">// the output TIN should exist</span></div><div class="line">  TS_ASSERT_EQUALS(144, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;Points().size());</div><div class="line">  <span class="comment">// Write output TIN for viewing in XMS</span></div><div class="line">  std::string tinFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testGuidebankTin_out.tin&quot;</span>));</div><div class="line">  std::ofstream ofs(tinFileName, std::ofstream::trunc);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;ExportTinFile(ofs);</div><div class="line">} <span class="comment">// TutStampingUnitTests::test_StampGuidebank</span></div></div><!-- fragment --><p> The output from this test looks like the following image.</p>
<div class="image">
<img src="doxygen/html/images/tutStamp_Guidebank.png" alt="Stamp fill embankment with a guidebank end cap"/>
</div>
<h2><a class="anchor" id="Example_Bathymetry"></a>
Example - Fill Embankment Feature Stamp Intersecting Bathymetry</h2>
<p>The following example shows how to use the stamper to make a fill embankment with an underlying bathymetry. The stamp is intersected and potentially cut off by the bathymetry. The testing code for this example is TutStampingTests::test_StampIntersectBathymetry.</p>
<div class="fragment"><div class="line"><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="comment"></span><span class="comment">//------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> <a class="code" href="class_tut_stamping_unit_tests.html#ae8001d45387b24405b6d7277f827b883">TutStampingUnitTests::test_StampIntersectBathymetry</a>()</div><div class="line">{</div><div class="line">  <span class="comment">// declare a XmStamperIo class to create the inputs</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamper_io.html">xms::XmStamperIo</a> io;</div><div class="line"></div><div class="line">  <span class="comment">// set as a &quot;fill&quot; stamp</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aaf8fcd384e63313a853ae09f8aa44fef">m_stampingType</a> = 1;</div><div class="line"></div><div class="line">  <span class="comment">// define the center line</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a12ca12a289b9efb55c46d7c0733b98a6">m_centerLine</a> = {{0, 0, 15}, {10, 10, 15}};</div><div class="line"></div><div class="line">  <span class="comment">// define a cross section at each point on the center line. This will</span></div><div class="line">  <span class="comment">// be a symmetric cross section. The top width will be 10 and the side</span></div><div class="line">  <span class="comment">// slope will be 1. The cross section will have a total width of 40.</span></div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_cross_section.html">xms::XmStampCrossSection</a> cs;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a> = {{0, 15}, {5, 15}, {6, 14}};</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a> = 20;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a> = 1;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#ae703f150a6589ef5aed99a75904a7317">m_right</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a4328b6d08341b31c921bd71bca00128b">m_left</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a73cdbaf385241ae7361bbd82ac31ef40">m_rightMax</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a02e060d1f3dfaea1d0119a055dcc397a">m_leftMax</a>;</div><div class="line">  cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a08dd2ea36dd84a7063a7070423285605">m_idxRightShoulder</a> = cs.<a class="code" href="classxms_1_1_xm_stamp_cross_section.html#a0b6fdce6a001b873ef4adf8ff60db2ce">m_idxLeftShoulder</a>;</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aad7f230066c5ad299feb024a281caa8c">m_cs</a>.push_back(cs);</div><div class="line"></div><div class="line">  <span class="comment">// create a TIN to represent Bathymetry</span></div><div class="line">  BSHP&lt;xms::TrTin&gt; tin = <a class="codeRef" doxygen="/home/conan/Doxygen/xmsinterp.tag:https://aquaveo.github.io/xmsinterp/" href="https://aquaveo.github.io/xmsinterp/classxms_1_1_tr_tin.html#ab1227a106b70c3061bd03cb3fb9833a7">xms::TrTin::New</a>();</div><div class="line">  BSHP&lt;xms::VecPt3d&gt; tPts(<span class="keyword">new</span> xms::VecPt3d());</div><div class="line">  *tPts = {{-1, 25, 6}, {-15, 11, 6}, {5, -11, 10}, {20, 4, 10}};</div><div class="line">  BSHP&lt;xms::VecInt&gt; tTris(<span class="keyword">new</span> xms::VecInt());</div><div class="line">  *tTris = {0, 1, 2, 1, 3, 2};</div><div class="line">  tin-&gt;SetPoints(tPts);</div><div class="line">  tin-&gt;SetTriangles(tTris);</div><div class="line">  <span class="comment">// set the bathymetry member of the io class</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a13b8586e3a61aaa8c199d81c967c01ef">m_bathymetry</a> = tin;</div><div class="line"></div><div class="line">  <span class="comment">// create a Raster to stamp to</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> numPixelsX = 29, numPixelsY = 34;</div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> pixelSize = 1.0;</div><div class="line">  <span class="keyword">const</span> xms::Pt3d minPt(-10.0, -8.0);</div><div class="line">  <span class="keyword">const</span> std::vector&lt;double&gt; rasterVals(numPixelsX * numPixelsY, XM_NODATA);</div><div class="line">  <a class="code" href="classxms_1_1_xm_stamp_raster.html">xms::XmStampRaster</a> raster(numPixelsX, numPixelsY, pixelSize, pixelSize, minPt, rasterVals, XM_NODATA);</div><div class="line">  <span class="comment">// set the raster member of the raster class.  The values are interpolated from io.m_outTin in</span></div><div class="line">  <span class="comment">// the XmStamper::DoStamp function.</span></div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a> = raster;</div><div class="line"></div><div class="line">  <span class="comment">// create a XmStamper class. This class performs the stamp operation.</span></div><div class="line">  BSHP&lt;xms::XmStamper&gt; st = <a class="code" href="classxms_1_1_xm_stamper.html#aad53ceb8805886749c4d5efc7928aee9">xms::XmStamper::New</a>();</div><div class="line">  st-&gt;DoStamp(io);</div><div class="line"></div><div class="line">  std::string rasterFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testIntersectBathymetry_out.asc&quot;</span>));</div><div class="line">  std::string baseFile(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testIntersectBathymetry_base.asc&quot;</span>));</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#aeb4d5ef97bda795d19d33e77d394863f">m_raster</a>.<a class="code" href="classxms_1_1_xm_stamp_raster.html#a32f68c68796b0c07c1fb877abb550ea6">WriteGridFile</a>(rasterFileName, xms::XmStampRaster::XmRasterFormatEnum::RS_ARCINFO_ASCII);</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#a910e81903f66d29dc334d1ed7c57ca5d">TS_ASSERT_TXT_FILES_EQUAL</a>(baseFile, rasterFileName);</div><div class="line"></div><div class="line">  <span class="comment">// verify the outputs</span></div><div class="line">  TS_ASSERT(io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>); <span class="comment">// the output TIN should exist</span></div><div class="line">  xms::VecPt3d basePts = {{0, 0, 15},          {10, 10, 15},        {-3.54, 3.54, 15},</div><div class="line">                          {-9.42, 9.42, 6.68}, {6.46, 13.54, 15},   {-4.14, 24.14, 0},</div><div class="line">                          {3.54, -3.54, 15},   {7.18, -7.18, 9.84}, {13.54, 6.46, 15},</div><div class="line">                          {17.18, 2.82, 9.84}};</div><div class="line">  <a class="codeRef" doxygen="/home/conan/Doxygen/xmscore.tag:https://aquaveo.github.io/xmscore/" href="https://aquaveo.github.io/xmscore/_test_tools_8h.html#ad074895a54cf874aed416e323758f355">TS_ASSERT_DELTA_VECPT3D</a>(basePts, io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;Points(), 1e-2);</div><div class="line">  <span class="comment">// Write output TIN for viewing in XMS</span></div><div class="line">  std::string tinFileName(XMS_TEST_PATH + std::string(<span class="stringliteral">&quot;stamping/rasterTestFiles/testIntersectBathymetryTin_out.tin&quot;</span>));</div><div class="line">  std::ofstream ofs(tinFileName, std::ofstream::trunc);</div><div class="line">  io.<a class="code" href="classxms_1_1_xm_stamper_io.html#a69b03c8db53199d1d09ea0e42f06086c">m_outTin</a>-&gt;ExportTinFile(ofs);</div><div class="line">} <span class="comment">// TutStampingUnitTests::test_StampIntersectBathymetry</span></div></div><!-- fragment --><p> The output from this test looks like the following image. The red triangles are the bathymetry.</p>
<div class="image">
<img src="doxygen/html/images/tutStamp_Intersect.png" alt="Stamp fill embankment cut off by bathymetry"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Dec 7 2018 16:03:59 for xmsstamper by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
